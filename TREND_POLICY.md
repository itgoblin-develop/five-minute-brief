# 아침 트렌드 뉴스 수집 정책

## 🎯 핵심 목표

**"매일 아침, 전날 오전 10시 ~ 당일 새벽 5시 사이에 발생한 주요 트렌드 뉴스를 자동으로 수집하고, 사용자에게 5분 안에 핵심 트렌드를 전달"**

---

## 📊 현재 문제점 분석

### 문제 1: 불용어 필터링의 한계
- ❌ 조사, 일반 동사/명사가 계속 섞임
- ❌ 불용어 리스트를 계속 추가해야 함
- ❌ API 호출이 비효율적으로 증가

### 문제 2: 키워드 기반 검색의 한계
- ❌ 고정된 키워드로 검색 → 트렌드 반영 안 됨
- ❌ 키워드가 너무 일반적 → 노이즈 많은 뉴스
- ❌ 실제 트렌드 키워드를 미리 알 수 없음

### 문제 3: 카테고리별 균형 부족
- ❌ 특정 카테고리에만 뉴스가 몰림
- ❌ 사용자가 원하는 카테고리 뉴스 누락 가능

---

## 🚀 새로운 접근 방식: 하이브리드 전략

### 전략 1: 데이터랩 API + 뉴스 검색 API 조합

**핵심 아이디어:**
1. **데이터랩 API로 트렌드 키워드 먼저 파악**
   - 네이버 뉴스 주요 카테고리별로 트렌드 키워드 조회
   - 예: 경제 카테고리에서 "기준금리", "부동산", "주식" 등 트렌드 키워드 추출
   
2. **추출된 트렌드 키워드로 뉴스 검색**
   - 데이터랩에서 찾은 키워드로 뉴스 검색 API 호출
   - 실제 트렌드 키워드만 검색 → 효율적

3. **카테고리별 균형 유지**
   - 각 카테고리에서 동일한 수의 트렌드 키워드 추출
   - 카테고리별 뉴스 수집 균형 유지

---

## 📋 상세 정책

### Phase 1: 트렌드 키워드 발견 (데이터랩 API 활용)

#### 1-1. 네이버 뉴스 주요 카테고리 정의
```
카테고리 구조:
- 경제 (101): 금융, 증권, 산업/재계, 중기/벤처, 부동산, 글로벌경제, 생활경제
- 사회 (102): 사건사고, 교육, 노동, 언론, 환경, 인권/복지, 식품/의료, 지역, 사회 일반
- IT/과학 (105): 모바일, 인터넷/SNS, 통신/뉴미디어, IT일반, 보안/해킹, 컴퓨터, 게임/리뷰, 과학일반
- 생활/문화 (103): 건강정보, 자동차시승기, 도로/교통, 여행/레저, 음식/맛집, 패션/뷰티, 공연/전시, 책
- 세계 (104): 아시아/호주, 미국, 중남미, 유럽, 중동/아프리카, 세계 일반
- 엔터 (106): 방송/연예, 가요, 영화, 드라마, 예능, 연예 일반
- 스포츠 (107): 야구, 축구, 농구/배구, 골프, 일반 스포츠, e스포츠
```

#### 1-2. 카테고리별 대표 키워드로 데이터랩 조회
```
각 카테고리에서 대표 키워드 3-5개 선정:
- 경제: "경제", "주식", "부동산", "금리", "환율"
- 사회: "사회", "정치", "교육", "환경", "복지", "사건사고"
- IT/과학: "IT", "AI", "반도체", "게임", "과학"
- 생활/문화: "건강", "자동차", "여행", "음식", "패션"
- 세계: "세계", "국제", "미국", "유럽", "중동"
- 엔터: "연예", "가요", "영화", "드라마", "예능"
- 스포츠: "스포츠", "야구", "축구", "골프", "e스포츠"

데이터랩 API로 각 키워드의 트렌드 데이터 조회
→ 상위 트렌드 키워드 추출
```

#### 1-3. 트렌드 키워드 선정 기준
```
1. 데이터랩에서 상위 10개 키워드 추출
2. 각 카테고리별로 최소 5개 키워드 보장
3. 전날 대비 급상승 키워드 우선 선정
4. 최종 선정: 카테고리당 5-10개, 총 20-40개 키워드
```

### Phase 2: 트렌드 뉴스 수집 (뉴스 검색 API)

#### 2-1. 선정된 키워드로 뉴스 검색
```
각 트렌드 키워드로 뉴스 검색:
- 키워드당 최대 50개 뉴스 검색 (API 효율 고려)
- 시간 범위: 전날 오전 10시 ~ 당일 새벽 5시
- 정렬: 날짜순 (최신순)
```

#### 2-2. 카테고리별 균형 유지
```
각 카테고리에서 동일한 수의 뉴스 수집:
- 카테고리당 최소 20개 뉴스 보장
- 최대 50개 뉴스까지 수집
- 총 80-200개 뉴스 수집 목표
```

#### 2-3. 중복 제거 및 품질 필터링
```
1. 링크 기준 중복 제거
   - 같은 link 또는 originallink를 가진 뉴스는 한 번만 포함

2. 제목 유사도 80% 이상 중복 제거
   - SequenceMatcher를 사용하여 두 제목의 유사도 계산
   - 유사도가 80% 이상이면 중복으로 간주하고 제거

3. 출처 다양성 확보 (같은 언론사 뉴스만 몰리지 않도록)
   - 도메인 기준으로 같은 출처당 최대 3개까지만 허용
   - 출처 다양성을 확보하여 한 언론사의 뉴스가 과도하게 몰리지 않도록 제한
```

### Phase 3: 트렌드 분석 및 랭킹

#### 3-1. 스마트 키워드 추출
```
1. 키워드 추출 규칙:
   - HTML 태그 제거 후 텍스트 분리
   - 조사 제거: "키워드가" → "키워드", "한국을" → "한국"
   - 한글 2글자 이상 + 불용어 제외
   - 영문 대문자 3글자 이상 (예: ETF, GDP, FOMC)

2. 가중치 적용:
   - 제목 키워드: 가중치 3
   - 요약(description) 키워드: 가중치 1

3. 불용어 목록:
   - 조사: 의, 이, 가, 을, 를, 은, 는, 에, 에서, 로, 으로, 와, 과, 도, 만 등
   - 일반 단어: 오늘, 내일, 어제, 최근, 현재, 대한, 관련, 통해, 국내, 개최, 정부, 시장 등

4. 키워드 정규화 (선택적):
   - 명확한 포함 관계만 처리 (예: "관찰" in "관찰대상국" → "관찰대상국"으로 통합)
   - 서로 다른 의미의 키워드는 별개로 유지
```

#### 3-2. 트렌드 스코어링
```
키워드 스코어 = 
  (빈도수 × 0.4) + 
  (관련 뉴스 수 × 0.3) + 
  (출처 다양성 × 0.2) + 
  (시간 신선도 × 0.1)

필터링 조건:
- 뉴스 1개 이상
- 빈도수 3 이상

상위 10-15개 키워드 선정 (필터링 후)
```

#### 3-3. 카테고리별 트렌드 랭킹
```
각 카테고리별로 상위 3-5개 트렌드 키워드 선정:
- 경제: 상위 5개
- 사회: 상위 5개 (사건사고, 교육, 노동, 환경 등 포함)
- IT/과학: 상위 3개 (모바일, 인터넷/SNS, 게임/리뷰 등 포함)
- 생활/문화: 상위 3개 (여행/레저, 음식/맛집, 패션/뷰티 등 포함)
- 세계: 상위 3개 (아시아/호주, 미국/중남미, 유럽/중동/아프리카 등 지역 이슈)
- 엔터: 상위 3개 (영화, 드라마, 예능, 가요 등 연예 이슈)
- 스포츠: 상위 3개 (야구, 축구, 골프, e스포츠 등 경기/선수 이슈)

총 20~25개 트렌드 키워드 (카테고리별 비중에 따라 조정 가능)
```

---

## 🔄 전체 프로세스 플로우

```
[매일 아침 6시 실행]
    ↓
[Phase 1: 트렌드 키워드 발견]
1. 네이버 뉴스 주요 카테고리 정의
2. 카테고리별 대표 키워드로 데이터랩 API 조회
3. 전날 트렌드 데이터 분석
4. 상위 트렌드 키워드 20-40개 선정
    ↓
[Phase 2: 트렌드 뉴스 수집]
5. 선정된 키워드로 뉴스 검색 API 호출
6. 시간 범위 필터링 (전날 10시 ~ 당일 5시)
7. 카테고리별 균형 유지
8. 중복 제거 및 품질 필터링
    ↓
[Phase 3: 트렌드 분석]
9. 스마트 키워드 추출 (명사 중심)
10. 트렌드 스코어링
11. 카테고리별 상위 키워드 선정
12. 각 키워드별 대표 뉴스 3-5개 매칭
    ↓
[결과 저장]
13. JSON 또는 DB에 저장
14. 프론트엔드에 전달
```

---

## 💡 핵심 개선 사항

### 1. 데이터랩 API 활용
- ✅ 실제 트렌드 키워드를 먼저 파악
- ✅ 고정 키워드 대신 동적 키워드 사용
- ✅ API 호출 효율성 향상

### 2. 카테고리별 균형
- ✅ 각 카테고리에서 동일한 수의 키워드 추출
- ✅ 카테고리별 뉴스 수집 균형 유지
- ✅ 사용자 관심사 반영 가능

### 3. 스마트 필터링
- ✅ 불용어 리스트 대신 명사 중심 추출
- ✅ 출처 다양성 고려
- ✅ 시간 신선도 반영

---

## 📊 예상 효과

### API 호출 효율
- **현재**: 250개 키워드 × 100개 = 25,000회 (한도 초과 위험)
- **개선 후**: 데이터랩 20회 + 뉴스 검색 40회 = 60회 (한도 0.24% 사용)

### 키워드 품질
- **현재**: "개최", "국내", "통해" 등 무의미한 키워드 포함
- **개선 후**: "기준금리", "NVIDIA", "부동산정책" 등 의미 있는 키워드만

### 트렌드 정확도
- **현재**: 고정 키워드로 인한 트렌드 반영 부족
- **개선 후**: 실제 트렌드 키워드 기반으로 정확도 향상

---

## 🎯 구현 우선순위

### 1단계: 데이터랩 API 연동 (필수)
- 카테고리별 대표 키워드로 트렌드 조회
- 상위 트렌드 키워드 추출 로직

### 2단계: 하이브리드 수집 로직 (필수)
- 데이터랩 → 뉴스 검색 파이프라인 구축
- 카테고리별 균형 유지 로직

### 3단계: 스마트 필터링 (개선)
- 명사 중심 키워드 추출
- 출처 다양성 고려

### 4단계: 최적화 (선택)
- 캐싱 전략
- 병렬 처리
